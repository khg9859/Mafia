# 마피아42 Java GUI 프로젝트 주간 보고서

## 1. 금주 진행한 작업

### 1.1 내 정보 화면 구현
- **프로필 섹션**
  - 사용자 프로필 이미지 표시 (절대 경로 적용)
  - 레벨 배지 및 경험치 바 구현
  - 닉네임 표시
  
- **직업 숙련도 시스템**
  - 14개 직업 카드 그리드 레이아웃 (5열)
  - 각 직업별 이미지 로드 (시민, 경찰, 의사, 자경단원, 영매, 군인, 정치인, 마피아, 건달, 기자, 탐정, 도굴꾼, 테러리스트, 성직자)
  - 직업별 레벨 표시 (0/550)
  
- **자기소개 영역**
  - 읽기 전용 텍스트 영역
  - 프로필 사진 높이에 맞춘 컴팩트한 레이아웃
  
- **통계 정보**
  - 승률, RP(랭크 포인트), CP(캐릭터 포인트), 명성 표시

### 1.2 상점 화면 구현
- **카테고리 시스템**
  - 왼쪽 사이드바에 5개 카테고리 (캐릭, 스킨, 명예, 경험, 일반)
  
- **아이템 그리드**
  - 4열 그리드 레이아웃
  - 12개 아이템 표시 (렉스 토큰, 할로윈 묘비석, 스케치북, 밀서, 경험치권, 염색약 등)
  - 각 아이템별 이미지 로드 (Shop 폴더)
  - 가격 및 화폐 타입 표시 (코인/실버)
  
- **패키지 배너**
  - 오른쪽에 3개 패키지 배너 (42팩팩 업그레이드, PC버전 특가, 데이터팩구)
  - 각 배너별 다른 색상 적용

### 1.3 길드 화면 구현
- **길드 목록**
  - 검색창 구현
  - 7개 더미 길드 데이터
  - 길드 아이콘, 이름, 설명, 입장 시간 표시
  
- **가입 안내 화면**
  - "가입한 길드가 없습니다" 메시지
  - GO MAFIA 아이콘 표시

### 1.4 팝업 다이얼로그 구현

#### 인벤토리 다이얼로그
- 5개 탭 (전체, 명예, 소셜, 기타, 이벤트)
- 6열 아이템 그리드
- 아이템 수량 표시 (x숫자)
- 더미 데이터: 정복자 x2, 텐서 x42

#### 우편함 다이얼로그
- 2개 탭 (받은 편지함, 보낸 편지함)
- 메일 개수 표시 (0/42)
- 검색창 및 알림 버튼
- 필터 (최신순) 및 내려받기 버튼
- 하단 보상 정보 (내역 없음, 출석 무료, 코인)

#### 일일 퀘스트 다이얼로그
- 퀘스트 카드 UI
- 퀘스트 제목 및 상태 배지 (예비 임무)
- 새로고침 버튼
- 보상 정보 (코인, EXP, 실버)
- 보상 받기 버튼

#### 최후의 변론 게시판 다이얼로그
- 3개 탭 (뉴토픽, 핫토픽, 보관함)
- 서버 선택 (로컬 서버)
- 게시글 목록 (4개 더미 데이터)
- 각 게시글: 프로필 이미지, 제목, 댓글/좋아요/싫어요 수, 온라인 상태
- 글쓰기 버튼

### 1.5 네비게이션 시스템 통합
- 모든 화면(로비, 내 정보, 상점, 길드)에 통일된 네비게이션 바 적용
- 메뉴 순서 통일: 로비, 내 정보, 상점, 길드
- 채널 정보 및 아이콘 버튼 추가 (설정, 종료, 메신저)
- 화면 간 원활한 전환 기능

### 1.6 이미지 리소스 관리
- 이미지 폴더 구조 정리
  - `images/info/`: 직업 카드 이미지 (15개)
  - `images/Shop/`: 상점 아이템 이미지 (11개)
- 절대 경로 적용으로 이미지 로드 안정성 확보

---

## 2. 금주 수행결과 및 문제점 해결방법

### 2.1 주요 성과
- ✅ 5개 주요 화면 완성 (로비, 내 정보, 상점, 길드, 게임방)
- ✅ 4개 팝업 다이얼로그 구현
- ✅ 통일된 UI/UX 디자인 적용
- ✅ 더미 데이터를 활용한 프로토타입 완성

### 2.2 발생한 문제점 및 해결방법

#### 문제 1: 이미지 로드 실패
**증상**: 프로필 이미지 및 직업 카드 이미지가 표시되지 않음

**원인**: 
- 상대 경로 사용으로 인한 경로 불일치
- 이미지 파일 위치 변경 (images/ → images/info/)

**해결방법**:
```java
// 절대 경로 적용
String basePath = "/Users/yongju/Desktop/test_hong/Mafia/images/info/";
ImageIcon originalIcon = new ImageIcon(basePath + "mafia.png");
```

#### 문제 2: 데이터베이스 컬럼 오류
**증상**: `Unknown column 'level' in 'field list'` 에러 발생

**원인**: 
- user 테이블에 존재하지 않는 level 컬럼 조회 시도

**해결방법**:
```java
// 존재하는 컬럼만 조회
String sql = "SELECT nickname, username FROM user WHERE user_id = ?";
// level, exp 등은 더미 데이터로 처리
private int level = 2;
private int exp = 450;
```

#### 문제 3: 컴파일된 클래스 파일 미반영
**증상**: 코드 수정 후에도 변경사항이 반영되지 않음

**원인**: 
- src 폴더 및 out 폴더에 오래된 .class 파일 잔존

**해결방법**:
```bash
# 모든 .class 파일 삭제
find Mafia/src -name "*.class" -type f -delete
rm -rf Mafia/out
# IntelliJ에서 Rebuild Project 실행
```

#### 문제 4: 버튼 이벤트 미작동
**증상**: 인벤토리, 우편함 등 버튼 클릭 시 반응 없음

**원인**: 
- Autofix가 메서드를 삭제하거나 이벤트 리스너 누락

**해결방법**:
```java
// 버튼 생성 시 이벤트 리스너 명시적 추가
if (icon.equals("인벤토리")) {
    btn.addActionListener(e -> showInventory());
}
```

#### 문제 5: 네비게이션 바 불일치
**증상**: 각 화면마다 메뉴 버튼 위치와 개수가 다름

**해결방법**:
- 모든 화면에 동일한 메뉴 배열 적용
- 간격 조정 (Box.createHorizontalStrut(50))
- 공통 아이콘 버튼 추가 (채널 정보, 설정, 종료, 메신저)

---

## 3. 다음주 예정작업

### 3.1 게임 로직 구현
- [ ] 방 생성 기능 구현
- [ ] 방 입장/퇴장 로직
- [ ] 게임 시작 조건 체크
- [ ] 역할 배정 시스템

### 3.2 게임 진행 화면
- [ ] 낮/밤 페이즈 UI
- [ ] 투표 시스템
- [ ] 채팅 기능 강화
- [ ] 능력 사용 UI

### 3.3 데이터베이스 연동
- [ ] 사용자 통계 저장 (승률, 게임 수)
- [ ] 레벨/경험치 시스템 구현
- [ ] 인벤토리 아이템 저장
- [ ] 우편함 메시지 저장

### 3.4 추가 기능
- [ ] 친구 시스템
- [ ] 선물함 기능 구현
- [ ] 게시판 글쓰기/댓글 기능
- [ ] 상점 구매 기능

### 3.5 UI/UX 개선
- [ ] 애니메이션 효과 추가
- [ ] 사운드 효과 적용
- [ ] 반응형 레이아웃 개선
- [ ] 다크/라이트 테마 지원

### 3.6 테스트 및 최적화
- [ ] 멀티플레이어 테스트
- [ ] 메모리 누수 체크
- [ ] 네트워크 안정성 테스트
- [ ] 버그 수정 및 리팩토링

---

## 참고사항

### 기술 스택
- **언어**: Java (Swing)
- **데이터베이스**: MySQL
- **네트워크**: Socket 통신
- **빌드 도구**: IntelliJ IDEA

### 프로젝트 구조
```
Mafia/
├── src/
│   ├── MainFrame.java          # 메인 프레임
│   ├── LobbyPanel.java          # 로비 화면
│   ├── MyInfoPanel.java         # 내 정보 화면
│   ├── ShopPanel.java           # 상점 화면
│   ├── GuildPanel.java          # 길드 화면
│   ├── InventoryDialog.java     # 인벤토리 팝업
│   ├── MailDialog.java          # 우편함 팝업
│   ├── DailyQuestDialog.java    # 일일 퀘스트 팝업
│   ├── ForumDialog.java         # 게시판 팝업
│   ├── client/                  # 클라이언트 로직
│   ├── server/                  # 서버 로직
│   └── database/                # DB 연결
├── images/
│   ├── info/                    # 직업 카드 이미지
│   └── Shop/                    # 상점 아이템 이미지
└── lib/                         # 외부 라이브러리
```

### 완성도
- **UI 구현**: 90%
- **게임 로직**: 30%
- **네트워크**: 50%
- **데이터베이스**: 40%
- **전체 진행률**: 약 55%
