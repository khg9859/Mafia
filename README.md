# 마피아 게임 (Mafia Game) - 실행 가이드

##  프로젝트 개요

자바 소켓 프로그래밍 기반의 멀티플레이어 마피아 게임입니다.
서버-클라이언트 구조로 여러 플레이어가 동시에 접속하여 마피아 게임을 즐길 수 있습니다.

##  게임 규칙

### 역할

1. **마피아 (MAFIA)** 

   - 밤에 시민 한 명을 제거할 수 있습니다
   - 마피아가 시민 수와 같거나 많아지면 승리
   - 4명일 때: 1명, 5명 이상: 2명

2. **의사 (DOCTOR)** 

   - 밤에 한 명을 지정하여 보호할 수 있습니다
   - 마피아의 공격으로부터 보호 가능
   - 게임당 1명

3. **경찰 (POLICE)** 

   - 밤에 한 명을 조사하여 마피아 여부 확인 가능
   - 조사 결과는 본인만 확인 가능
   - 게임당 1명

4. **시민 (CITIZEN)** 
   - 특별한 능력은 없지만 투표로 마피아를 찾아야 함
   - 낮 토론에서 정보를 모으고 추리해야 함

### 게임 진행

#### 1단계: 대기 (WAITING)

- 최소 4명 이상의 플레이어가 접속해야 함
- 서버 관리자가 "Game Start" 버튼을 눌러 게임 시작
- 역할이 무작위로 배정됨

#### 2단계: 밤 (NIGHT) - 30초

- 마피아: 제거할 대상 선택
- 의사: 보호할 대상 선택
- 경찰: 조사할 대상 선택
- 시민: 아무 행동도 할 수 없음

#### 3단계: 밤 결과 발표

- 마피아에게 제거된 사람 공개 (의사가 보호한 경우 생존)
- 경찰은 조사 결과를 개인적으로 확인

#### 4단계: 낮 (DAY) - 30초

- 모든 플레이어가 자유롭게 대화
- 의심되는 사람에 대해 토론
- 경찰은 조사 결과를 공유할 수 있음 (선택사항)

#### 5단계: 투표 (VOTE) - 20초

- 살아있는 플레이어 중 한 명에게 투표
- 가장 많은 표를 받은 사람이 제거됨
- 동점이거나 투표가 없으면 아무도 제거되지 않음

#### 6단계: 승리 조건 확인

- **시민 팀 승리**: 모든 마피아가 제거됨
- **마피아 팀 승리**: 마피아 수 ≥ 시민 수

승리 조건이 만족되지 않으면 2단계(밤)로 돌아가서 반복

##  실행 방법

### 필요 조건

- Java JDK 8 이상

### 1. 파일 준비

다음 3개의 파일이 필요합니다:

- `MafiaGameServer.java` - 서버 프로그램
- `MafiaGameClientMain.java` - 클라이언트 로그인 화면
- `MafiaGameClientView.java` - 클라이언트 게임 화면

### 2. 컴파일

Windows:

```bash
javac MafiaGameServer.java
javac MafiaGameClientMain.java MafiaGameClientView.java
```

Linux/Mac:

```bash
javac MafiaGameServer.java
javac MafiaGameClientMain.java MafiaGameClientView.java
```

### 3. 실행

#### 서버 실행 (먼저 실행)

```bash
java MafiaGameServer
```

1. 서버 GUI가 열립니다
2. Port Number를 확인 (기본값: 30000)
3. "Server Start" 버튼 클릭
4. 플레이어들이 접속하기를 기다립니다
5. 4명 이상 접속하면 "Game Start" 버튼 클릭

#### 클라이언트 실행 (여러 개 실행 가능)

```bash
java MafiaGameClientMain
```

1. 클라이언트 GUI가 열립니다
2. User Name 입력 (각자 다른 이름)
3. IP Address 입력 (로컬: 127.0.0.1)
4. Port Number 입력 (서버와 동일하게)
5. "Connect to Game" 버튼 클릭

### 4. 테스트 방법

- 한 컴퓨터에서 테스트하려면:

  1. 서버 1개 실행
  2. 클라이언트 4개 이상 실행 (각각 다른 이름으로 접속)
  3. 서버에서 "Game Start" 클릭

- 여러 컴퓨터에서 테스트하려면:
  1. 서버를 실행한 컴퓨터의 IP 주소 확인
  2. 다른 컴퓨터에서 클라이언트 실행 시 해당 IP 주소 입력

##  플레이 팁

### 시민 팀 전략

1. **경찰 정보 활용**: 경찰의 조사 결과를 신중히 듣고 판단
2. **투표 패턴 분석**: 누가 누구에게 투표하는지 관찰
3. **행동 패턴 관찰**: 의심스러운 발언이나 행동 체크
4. **정보 공유**: 자신이 본 것, 느낀 것을 공유

### 마피아 전략

1. **시민처럼 행동**: 너무 조용하거나 적극적이지 않게
2. **의사/경찰 제거 우선**: 능력자들을 먼저 제거
3. **프레임 짜기**: 다른 플레이어를 의심하도록 유도
4. **팀플레이**: 동료 마피아와 투표를 분산

### 의사 전략

1. **중요 인물 보호**: 경찰이나 믿을 만한 시민 보호
2. **역할 숨기기**: 마피아에게 들키지 않도록 조심
3. **패턴 변경**: 같은 사람만 계속 보호하지 않기

### 경찰 전략

1. **의심스러운 사람 조사**: 행동이 수상한 플레이어 우선
2. **정보 공유 타이밍**: 적절한 때에 조사 결과 공개
3. **역할 보호**: 너무 빨리 정체가 드러나지 않도록 주의

##  GUI 설명

### 서버 화면

- **게임 로그**: 모든 플레이어의 행동과 게임 진행 상황 표시
- **Server Start**: 서버 시작 버튼
- **Game Start**: 게임 시작 버튼 (4명 이상 필요)

### 클라이언트 화면

- **Game Status Panel**:

  - Player: 자신의 이름
  - Role: 배정받은 역할
  - Phase: 현재 게임 단계
  - Status: 생존/사망 상태

- **Chat Area**:

  - 게임 메시지와 플레이어 채팅 표시
  - 시스템 메시지 확인

- **Players List**:

  - 현재 살아있는 플레이어 목록
  - 행동/투표할 대상 선택

- **Action Button**:

  - 밤: 역할에 따른 행동 수행
  - 투표: 선택한 플레이어에게 투표

- **Chat Input**:
  - 다른 플레이어와 대화
  - "/exit" 입력 시 종료

## � 주요 기능

### 서버 기능

1. 다중 클라이언트 접속 관리
2. 역할 무작위 배정
3. 게임 페이즈 자동 전환
4. 밤 행동 수집 및 처리
5. 투표 집계 및 결과 처리
6. 승리 조건 자동 판정

### 클라이언트 기능

1. 서버 접속 및 로그인
2. 역할 확인 (색상 코드화)
3. 게임 페이즈 실시간 표시
4. 플레이어 목록 업데이트
5. 역할별 행동 수행
6. 채팅 기능

## � 프로토콜 설명

### 서버 → 클라이언트

- `ROLE:역할명` - 역할 배정
- `PHASE:단계명` - 게임 단계 변경
- `PLAYERS:이름1,이름2,...` - 살아있는 플레이어 목록
- `DEAD:true` - 사망 알림
- `SYSTEM: 메시지` - 시스템 메시지

### 클라이언트 → 서버

- `/login 이름` - 로그인
- `NIGHT_ACTION:역할:대상` - 밤 행동
- `VOTE:대상` - 투표
- `[이름] 메시지` - 일반 채팅
- `/exit` - 종료


