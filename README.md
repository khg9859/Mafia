# 마피아42 방 생성 및 입장 시스템

JavaChat 코드를 기반으로 만든 실시간 방 생성/입장 시스템입니다.

##  새로 추가된 파일

1. **GameServer.java** - 게임 서버 (방 관리 및 클라이언트 연결 처리)
2. **GameRoom.java** - 개별 게임방 클래스
3. **ClientHandler.java** - 클라이언트 연결 핸들러
4. **RoomPanel.java** - 방 안에서의 채팅 UI
5. **LobbyPanel.java** (수정) - 서버와 통신하여 실시간 방 목록 표시

##  실행 방법

### 1단계: 서버 실행
```bash
cd Mafia/src
javac GameServer.java
java GameServer
```
- 서버 GUI가 열리면 "서버 시작" 버튼 클릭
- 기본 포트: 30000

### 2단계: 클라이언트 실행 (여러 개 가능)
```bash
cd Mafia/src
javac MainFrame.java
java MainFrame
```
- 로그인 후 로비 화면으로 이동

##  기능 설명

### 로비 화면
- **방 만들기**: 방 이름과 최대 인원(4~12명) 설정 가능
- **방 목록**: 실시간으로 업데이트되는 방 목록
- **방 입장**: 방을 클릭하면 입장
- **새로고침**: 방 목록 수동 갱신

### 방 안 화면
- **실시간 채팅**: 방 안의 모든 사람과 채팅 가능
- **입장/퇴장 알림**: 누가 들어오고 나가는지 표시
- **방 나가기**: 로비로 돌아가기

### 클라이언트 → 서버
- `/login [닉네임]` - 로그인
- `/create_room [방이름]|[최대인원]` - 방 생성
- `/join_room [방ID]` - 방 입장
- `/leave_room` - 방 나가기
- `/room_list` - 방 목록 요청
- 일반 메시지 - 채팅

### 서버 → 클라이언트
- `/login_success` - 로그인 성공
- `/room_list|[방정보들]` - 방 목록 전송
- `/room_created [방ID]` - 방 생성 완료
- `/join_success [방ID]|[방이름]` - 입장 성공
- `/join_failed [이유]` - 입장 실패
- `/leave_success` - 퇴장 완료
- `/player_joined [닉네임]` - 플레이어 입장
- `/player_left [닉네임]` - 플레이어 퇴장

##  테스트 시나리오

1. **서버 실행** → GameServer 실행 후 "서버 시작"
2. **클라이언트 1 실행** → 로그인 → 방 만들기 (예: "테스트방", 6명)
3. **클라이언트 2 실행** → 로그인 → 방 목록에서 "테스트방" 클릭하여 입장
4. **채팅 테스트** → 두 클라이언트에서 메시지 주고받기
5. **퇴장 테스트** → "방 나가기" 버튼으로 로비 복귀
6. **방 삭제 확인** → 모든 사람이 나가면 방이 자동 삭제됨

##  주요 특징

- ✅ 실시간 방 목록 업데이트
- ✅ 방 생성/입장/퇴장 기능
- ✅ 방 안에서 실시간 채팅
- ✅ 입장/퇴장 알림
- ✅ 방이 비면 자동 삭제
- ✅ 최대 인원 제한
- ✅ 마우스 호버 효과

##  향후 확장 가능 기능

- 게임 시작 기능
- 역할 배정 (마피아, 시민, 의사 등)
- 투표 시스템
- 게임 진행 상태 관리
- 방 비밀번호 설정
- 관전 모드
