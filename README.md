# λ§ν”Όμ•„42 - Java μ†μΌ“ ν”„λ΅κ·Έλλ° ν”„λ΅μ νΈ

Java Swing GUIμ™€ μ†μΌ“ ν”„λ΅κ·Έλλ°μ„ ν™μ©ν• λ©€ν‹°ν”λ μ΄μ–΄ λ§ν”Όμ•„ κ²μ„

## π“‹ ν”„λ΅μ νΈ κ°μ”

- **μ„λ²„-ν΄λΌμ΄μ–ΈνΈ μ†μΌ“ ν†µμ‹ ** κΈ°λ° λ„¤νΈμ›ν¬ μ• ν”λ¦¬μΌ€μ΄μ…
- **λ©€ν‹°μ¤λ λ“** μ²λ¦¬λ΅ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ λ™μ‹ μ ‘μ† μ§€μ›
- **MySQL λ°μ΄ν„°λ² μ΄μ¤** μ—°λ™ (μ‚¬μ©μ κ³„μ •, λ°© κ΄€λ¦¬)
- **μ‹¤μ‹κ°„ μ±„ν…** μ‹μ¤ν… κµ¬ν„
- **Java Swing** GUIλ΅ μ§κ΄€μ μΈ μ‚¬μ©μ μΈν„°νμ΄μ¤

## π® μ£Όμ” κΈ°λ¥

### β… κµ¬ν„ μ™„λ£
- λ΅κ·ΈμΈ / νμ›κ°€μ… μ‹μ¤ν…
- μ„λ²„-ν΄λΌμ΄μ–ΈνΈ μ†μΌ“ μ—°κ²°
- λ©€ν‹°ν”λ μ΄μ–΄ μ±„ν… (λ°©λ³„ κ²©λ¦¬)
- μ‹¤μ‹κ°„ ν”λ μ΄μ–΄ λ©λ΅
- λ°© μ…μ¥/ν‡΄μ¥ μ•λ¦Ό
- DB κΈ°λ° λ°© κ΄€λ¦¬ μ‹μ¤ν…

## π›  κΈ°μ  μ¤νƒ

- **μ–Έμ–΄**: Java
- **GUI**: Swing
- **λ„¤νΈμ›ν¬**: Socket Programming (ServerSocket, Socket)
- **λ©€ν‹°μ¤λ λ“**: Thread per client λ¨λΈ
- **λ°μ΄ν„°λ² μ΄μ¤**: MySQL 8.0
- **JDBC λ“λΌμ΄λ²„**: mysql-connector-j-9.5.0

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
mafia/
β”β”€β”€ src/
β”‚   β”β”€β”€ MainFrame.java              # λ©”μΈ GUI ν”„λ μ„
β”‚   β”β”€β”€ LoginPanel.java             # λ΅κ·ΈμΈ ν™”λ©΄
β”‚   β”β”€β”€ LobbyPanel.java             # λ΅λΉ„ (λ°© λ©λ΅)
β”‚   β”β”€β”€ GameRoomPanel.java          # κ²μ„λ°© (μ±„ν…)
β”‚   β”β”€β”€ ChannelSelectPanel.java     # μ±„λ„ μ„ νƒ
β”‚   β”β”€β”€ client/
β”‚   β”‚   β””β”€β”€ GameClient.java         # ν΄λΌμ΄μ–ΈνΈ μ†μΌ“
β”‚   β”β”€β”€ server/
β”‚   β”‚   β”β”€β”€ MafiaServer.java        # μ„λ²„ λ©”μΈ
β”‚   β”‚   β”β”€β”€ ClientHandler.java      # ν΄λΌμ΄μ–ΈνΈ ν•Έλ“¤λ¬
β”‚   β”‚   β””β”€β”€ RoomManager.java        # λ°© κ΄€λ¦¬μ
β”‚   β”β”€β”€ protocol/
β”‚   β”‚   β””β”€β”€ Message.java            # λ©”μ‹μ§€ ν”„λ΅ν† μ½
β”‚   β””β”€β”€ database/
β”‚       β”β”€β”€ DatabaseConnection.java # DB μ—°κ²°
β”‚       β””β”€β”€ RoomDAO.java            # λ°© λ°μ΄ν„° μ•΅μ„Έμ¤
β”β”€β”€ lib/
β”‚   β””β”€β”€ mysql-connector-j-9.5.0.jar
β”β”€β”€ mafia.sql                        # κΈ°λ³Έ DB μ¤ν‚¤λ§
β””β”€β”€ mafia_extended.sql               # ν™•μ¥ DB μ¤ν‚¤λ§
```

## β™οΈ μ„¤μΉ λ° μ„¤μ •

### 1. λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •

```bash
# MySQL μ‹¤ν–‰ ν›„
mysql -u root -p

# λ°μ΄ν„°λ² μ΄μ¤ μƒμ„± λ° μ¤ν‚¤λ§ μ μ©
mysql -u root -p < mafia.sql
mysql -u root -p < mafia_extended.sql
```

### 2. μ»΄νμΌ

```bash
javac -encoding UTF-8 -d out -cp "lib/*" src/protocol/*.java src/database/*.java src/server/*.java src/client/*.java src/*.java
```

## π€ μ‹¤ν–‰ λ°©λ²•

### β οΈ μ¤‘μ”: λ°λ“μ‹ μμ„λ€λ΅ μ‹¤ν–‰ν•μ„Έμ”!

### 1λ‹¨κ³„: μ„λ²„ μ‹¤ν–‰ (ν•„μ)

```bash
# ν„°λ―Έλ„ 1λ²μ—μ„ μ„λ²„ μ‹¤ν–‰
java -cp "out:lib/*" server.MafiaServer
```

**μ¶λ ¥ μμ‹:**
```
========================================
π® λ§ν”Όμ•„42 μ„λ²„ μ‹μ‘
π“΅ ν¬νΈ: 9999
β° μ‹μ‘ μ‹κ°: ...
========================================
```

### 2λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (μ—¬λ¬ κ° μ‹¤ν–‰ κ°€λ¥)

**ν΄λΌμ΄μ–ΈνΈ 1λ² μ‹¤ν–‰:**
```bash
# ν„°λ―Έλ„ 2λ²μ—μ„
java -cp "out:lib/*" MainFrame
```

**ν΄λΌμ΄μ–ΈνΈ 2λ² μ‹¤ν–‰:**
```bash
# ν„°λ―Έλ„ 3λ²μ—μ„
java -cp "out:lib/*" MainFrame
```

**ν΄λΌμ΄μ–ΈνΈ 3λ² μ‹¤ν–‰:**
```bash
# ν„°λ―Έλ„ 4λ²μ—μ„
java -cp "out:lib/*" MainFrame
```

## π― μ‚¬μ© λ°©λ²•

### 1. λ΅κ·ΈμΈ
κ° ν΄λΌμ΄μ–ΈνΈμ—μ„ **λ‹¤λ¥Έ κ³„μ •**μΌλ΅ λ΅κ·ΈμΈ:

**κΈ°μ΅΄ κ³„μ •:**
- μ•„μ΄λ””: `123` / λΉ„λ°€λ²νΈ: `123`
- μ•„μ΄λ””: `1234` / λΉ„λ°€λ²νΈ: `1234`
- μ•„μ΄λ””: `2123` / λΉ„λ°€λ²νΈ: `123`

λλ” "νμ›κ°€μ…" λ²„νΌμΌλ΅ μƒ κ³„μ • μƒμ„±

### 2. λ΅λΉ„μ—μ„ λ°© μ„ νƒ
- λ΅κ·ΈμΈ μ„±κ³µ μ‹ μλ™μΌλ΅ μ„λ²„ μ—°κ²°
- DBμ—μ„ λ¶λ¬μ¨ λ°© λ©λ΅ ν™•μΈ
- μ›ν•λ” λ°©μ„ ν΄λ¦­ν•μ—¬ μ…μ¥

### 3. μ±„ν…ν•κΈ°
- κ°™μ€ λ°©μ— μ…μ¥ν• ν”λ μ΄μ–΄λ“¤κ³Ό μ‹¤μ‹κ°„ μ±„ν…
- μ™Όμ½: ν”λ μ΄μ–΄ λ©λ΅
- μ¤λ¥Έμ½: μ±„ν… μμ—­
- λ©”μ‹μ§€ μ…λ ¥ ν›„ Enter λλ” "μ „μ†΅" λ²„νΌ

## π’¬ λ©€ν‹°ν”λ μ΄μ–΄ μ±„ν… ν…μ¤νΈ

1. **μ„λ²„ 1κ° + ν΄λΌμ΄μ–ΈνΈ 3κ°** μ‹¤ν–‰
2. κ° ν΄λΌμ΄μ–ΈνΈμ—μ„ **λ‹¤λ¥Έ κ³„μ •**μΌλ΅ λ΅κ·ΈμΈ
3. λ¨λ‘ **κ°™μ€ λ°©**μ— μ…μ¥
4. ν• ν΄λΌμ΄μ–ΈνΈμ—μ„ λ©”μ‹μ§€ μ „μ†΅
5. λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ“¤μ—κ² **μ‹¤μ‹κ°„μΌλ΅ λ©”μ‹μ§€ μ „λ‹¬** β¨

## π”§ νΈλ¬λΈ”μν…

### μ„λ²„ μ—°κ²° μ‹¤ν¨
```
β μ„λ²„μ— μ—°κ²°ν•  μ μ—†μµλ‹λ‹¤
```
**ν•΄κ²°λ°©λ²•:** μ„λ²„κ°€ λ¨Όμ € μ‹¤ν–‰λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”.

### DB μ—°κ²° μ‹¤ν¨
```
β DB μ—°κ²° μ‹¤ν¨
```
**ν•΄κ²°λ°©λ²•:**
- MySQLμ΄ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
- DB μ‚¬μ©μλ…/λΉ„λ°€λ²νΈ ν™•μΈ (κΈ°λ³Έκ°’: root/1234)
- mafia λ°μ΄ν„°λ² μ΄μ¤κ°€ μƒμ„±λμ–΄ μλ”μ§€ ν™•μΈ

### λ°© μ…μ¥ μ‹¤ν¨ (Duplicate entry)
```
β λ°© μ…μ¥ μ‹¤ν¨: Duplicate entry
```
**ν•΄κ²°λ°©λ²•:** DB μ •λ¦¬ ν›„ μ¬μ‹μ‘
```bash
mysql -u root -p1234 -e "USE mafia; DELETE FROM room_players; UPDATE rooms SET current_players = 0;"
```

## π“ λ„¤νΈμ›ν¬ ν”„λ΅ν† μ½

### λ©”μ‹μ§€ ν•μ‹
```
TYPE:data
```

### λ©”μ‹μ§€ νƒ€μ…
- `LOGIN` - λ΅κ·ΈμΈ (username|nickname|userId)
- `ROOM_JOIN` - λ°© μ…μ¥ (roomId)
- `ROOM_LEAVE` - λ°© ν‡΄μ¥
- `CHAT_MESSAGE` - μ±„ν… λ©”μ‹μ§€ (message)
- `PLAYER_JOINED` - ν”λ μ΄μ–΄ μ…μ¥ μ•λ¦Ό (nickname)
- `PLAYER_LEFT` - ν”λ μ΄μ–΄ ν‡΄μ¥ μ•λ¦Ό (nickname)
- `PLAYER_LIST` - ν”λ μ΄μ–΄ λ©λ΅ (nick1|nick2|...)

## π“ ν•™μµ ν¬μΈνΈ

μ΄ ν”„λ΅μ νΈμ—μ„ λ‹¤λ£¨λ” κ°λ…:
- Java μ†μΌ“ ν”„λ΅κ·Έλλ° (ServerSocket, Socket)
- λ©€ν‹°μ¤λ λ“ ν”„λ΅κ·Έλλ° (Thread per client)
- λ™κΈ°ν™” (synchronized, ConcurrentHashMap)
- JDBCλ¥Ό ν™μ©ν• λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™
- GUI ν”„λ΅κ·Έλλ° (Swing, CardLayout)
- λ„¤νΈμ›ν¬ ν”„λ΅ν† μ½ μ„¤κ³„
- ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ•„ν‚¤ν…μ²

## π“ κ°λ°μ μ •λ³΄

- **ν”„λ΅μ νΈ λ©μ **: λ„¤νΈμ›ν¬ ν”„λ΅κ·Έλλ° ν•™μµ
- **κ°λ° κΈ°κ°„**: 2025λ…„ 11μ›”