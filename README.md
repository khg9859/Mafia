# λ§ν”Όμ•„ κ²μ„ (Mafia Game)

[![Build and Release](https://github.com/khg9859/Mafia/actions/workflows/build.yml/badge.svg)](https://github.com/khg9859/Mafia/actions/workflows/build.yml)

## π“‹ ν”„λ΅μ νΈ κ°μ”

μλ°” μ†μΌ“ ν”„λ΅κ·Έλλ° κΈ°λ°μ λ©€ν‹°ν”λ μ΄μ–΄ λ§ν”Όμ•„ κ²μ„μ…λ‹λ‹¤.
μ„λ²„-ν΄λΌμ΄μ–ΈνΈ κµ¬μ΅°λ΅ μ—¬λ¬ ν”λ μ΄μ–΄κ°€ λ™μ‹μ— μ ‘μ†ν•μ—¬ λ§ν”Όμ•„ κ²μ„μ„ μ¦κΈΈ μ μμµλ‹λ‹¤.

## π€ λΉ λ¥Έ μ‹μ‘

### ν•„μ” μ΅°κ±΄

- **Java 17 μ΄μƒ** (JDK 17+)
- **Maven 3.6 μ΄μƒ** (λΉλ“μ©)

### Git Clone λ°©λ²•

```bash
# HTTPSλ΅ ν΄λ΅ 
git clone https://github.com/khg9859/Mafia.git
cd Mafia

# λλ” SSHλ΅ ν΄λ΅  (SSH ν‚¤ μ„¤μ • ν•„μ”)
git clone git@github.com:khg9859/Mafia.git
cd Mafia
```

### Maven μ„¤μΉ

**macOS:**
```bash
# Homebrewλ΅ Maven μ„¤μΉ
brew install maven

# Maven λ²„μ „ ν™•μΈ
mvn --version
```

**Windows:**
1. [Apache Maven κ³µμ‹ μ‚¬μ΄νΈ](https://maven.apache.org/download.cgi)μ—μ„ λ‹¤μ΄λ΅λ“
2. ν™κ²½ λ³€μ μ„¤μ • ν›„ `mvn --version` λ…λ Ήμ–΄λ΅ ν™•μΈ

**Linux:**
```bash
# Ubuntu/Debian
sudo apt-get install maven

# CentOS/RHEL
sudo yum install maven
```

### λΉλ“ λ°©λ²•

```bash
# MavenμΌλ΅ λΉλ“
mvn clean package

# λΉλ“ κ²°κ³Ό ν™•μΈ
ls -lh target/
```

λΉλ“κ°€ μ™„λ£λλ©΄ `target/` λ””λ ‰ν† λ¦¬μ— λ‹¤μ νμΌλ“¤μ΄ μƒμ„±λ©λ‹λ‹¤:
- `mafia-game-1.0.0-server-executable.jar` - μ„λ²„ μ‹¤ν–‰ νμΌ
- `mafia-game-1.0.0-client-executable.jar` - ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ νμΌ
- `mafia-game-1.0.0.jar` - μΌλ° JAR νμΌ

### μ‹¤ν–‰ λ°©λ²•

#### λ°©λ²• 1: λΉλ“λ μ‹¤ν–‰ νμΌ μ‚¬μ© (κ¶μ¥)

**1. μ„λ²„ μ‹¤ν–‰ (λ¨Όμ € μ‹¤ν–‰)**

```bash
java -jar target/mafia-game-1.0.0-server-executable.jar
```

1. μ„λ²„ GUIκ°€ μ—΄λ¦½λ‹λ‹¤
2. Port Numberλ¥Ό ν™•μΈ (κΈ°λ³Έκ°’: 30000)
3. "Start Server" λ²„νΌ ν΄λ¦­
4. ν”λ μ΄μ–΄λ“¤μ΄ μ ‘μ†ν•κΈ°λ¥Ό κΈ°λ‹¤λ¦½λ‹λ‹¤
5. 4λ… μ΄μƒ μ ‘μ†ν•λ©΄ "Start Game" λ²„νΌ ν΄λ¦­

**2. ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (μ—¬λ¬ κ° μ‹¤ν–‰ κ°€λ¥)**

```bash
java -jar target/mafia-game-1.0.0-client-executable.jar
```

1. ν΄λΌμ΄μ–ΈνΈ GUIκ°€ μ—΄λ¦½λ‹λ‹¤
2. User Name μ…λ ¥ (κ°μ λ‹¤λ¥Έ μ΄λ¦„)
3. IP Address μ…λ ¥ (λ΅μ»¬: 127.0.0.1)
4. Port Number μ…λ ¥ (μ„λ²„μ™€ λ™μΌν•κ²)
5. "Connect to Game" λ²„νΌ ν΄λ¦­

#### λ°©λ²• 2: μ»΄νμΌλ ν΄λμ¤ νμΌ μ§μ ‘ μ‹¤ν–‰

```bash
# λ¨Όμ € μ»΄νμΌ
mvn clean compile

# μ„λ²„ μ‹¤ν–‰
java -cp target/classes mafia.game.MafiaGameServer

# ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (κ°κ° μƒ ν„°λ―Έλ„μ—μ„)
java -cp target/classes mafia.game.MafiaGameClientMain
```

#### λ°©λ²• 3: ν• λ²μ— μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (ν…μ¤νΈμ©)

```bash
# λ¨Όμ € μ»΄νμΌ
mvn clean compile

# μ„λ²„ 1κ° + ν΄λΌμ΄μ–ΈνΈ 8κ° λ™μ‹ μ‹¤ν–‰
java -cp target/classes mafia.game.MafiaGameServer &
sleep 2
for i in {1..8}; do
  java -cp target/classes mafia.game.MafiaGameClientMain &
  sleep 1
done
```

### ν…μ¤νΈ λ°©λ²•

- **ν• μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈν•λ ¤λ©΄**:

  1. μ„λ²„ 1κ° μ‹¤ν–‰
  2. ν΄λΌμ΄μ–ΈνΈ 4κ° μ΄μƒ μ‹¤ν–‰ (κ°κ° λ‹¤λ¥Έ μ΄λ¦„μΌλ΅ μ ‘μ†)
  3. μ„λ²„μ—μ„ "Start Game" ν΄λ¦­

- **μ—¬λ¬ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈν•λ ¤λ©΄**:
  1. μ„λ²„λ¥Ό μ‹¤ν–‰ν• μ»΄ν“¨ν„°μ IP μ£Όμ† ν™•μΈ
  2. λ‹¤λ¥Έ μ»΄ν“¨ν„°μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ μ‹ ν•΄λ‹Ή IP μ£Όμ† μ…λ ¥

## π“¦ ν”„λ΅μ νΈ κµ¬μ΅°

```
λ§ν”Όμ•„2/
β”β”€β”€ .github/
β”‚   β””β”€β”€ workflows/
β”‚       β””β”€β”€ build.yml                 # GitHub Actions CI/CD μ„¤μ •
β”β”€β”€ src/
β”‚   β””β”€β”€ main/
β”‚       β”β”€β”€ java/
β”‚       β”‚   β””β”€β”€ mafia/game/
β”‚       β”‚       β”β”€β”€ MafiaGameServer.java         # μ„λ²„ λ©”μΈ ν΄λμ¤
β”‚       β”‚       β”β”€β”€ MafiaGameClientMain.java     # ν΄λΌμ΄μ–ΈνΈ λ΅κ·ΈμΈ ν™”λ©΄
β”‚       β”‚       β””β”€β”€ MafiaGameClientView.java     # ν΄λΌμ΄μ–ΈνΈ κ²μ„ ν™”λ©΄
β”‚       β””β”€β”€ resources/
β”‚           β”β”€β”€ GameSound/            # κ²μ„ μ‚¬μ΄λ“ νμΌ
β”‚           β”‚   β”β”€β”€ game_start.wav    # κ²μ„ μ‹μ‘ μ‚¬μ΄λ“
β”‚           β”‚   β”β”€β”€ night.wav         # λ°¤ μ‹μ‘ μ‚¬μ΄λ“
β”‚           β”‚   β”β”€β”€ morning.wav       # μ•„μΉ¨ μ‹μ‘ μ‚¬μ΄λ“
β”‚           β”‚   β”β”€β”€ vote.wav          # ν¬ν‘ μ‹μ‘ μ‚¬μ΄λ“
β”‚           β”‚   β”β”€β”€ Citizen/          # μ‹λ―Ό ν€ μ§μ—… μ‚¬μ΄λ“
β”‚           β”‚   β””β”€β”€ Mafia_team/       # λ§ν”Όμ•„ ν€ μ§μ—… μ‚¬μ΄λ“
β”‚           β””β”€β”€ info/                 # μ΄λ―Έμ§€ λ¦¬μ†μ¤
β”‚               β”β”€β”€ background.png
β”‚               β”β”€β”€ server_background.jpg
β”‚               β”β”€β”€ Default.png       # κΈ°λ³Έ ν”„λ΅ν•„ μ΄λ―Έμ§€
β”‚               β””β”€β”€ [μ—­ν• λ³„ μ΄λ―Έμ§€λ“¤] # mafia.png, doctor.png λ“±
β”β”€β”€ target/                           # Maven λΉλ“ κ²°κ³Όλ¬Ό (μλ™ μƒμ„±)
β”‚   β”β”€β”€ classes/                      # μ»΄νμΌλ ν΄λμ¤ νμΌ
β”‚   β”β”€β”€ mafia-game-1.0.0.jar         # μΌλ° JAR
β”‚   β”β”€β”€ mafia-game-1.0.0-server-executable.jar  # μ„λ²„ μ‹¤ν–‰ JAR
β”‚   β””β”€β”€ mafia-game-1.0.0-client-executable.jar  # ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ JAR
β”β”€β”€ pom.xml                           # Maven μ„¤μ • νμΌ
β”β”€β”€ .gitignore                        # Git λ¬΄μ‹ νμΌ λ©λ΅
β”β”€β”€ MAVEN_MIGRATION.md                # Maven λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“
β””β”€β”€ README.md                         # ν”„λ΅μ νΈ λ¬Έμ„ (μ΄ νμΌ)
```

## π® κ²μ„ κ·μΉ™

### μ—­ν• 

1. **λ§ν”Όμ•„ (MAFIA)**

   - λ°¤μ— μ‹λ―Ό ν• λ…μ„ μ κ±°ν•  μ μμµλ‹λ‹¤
   - λ§ν”Όμ•„κ°€ μ‹λ―Ό μμ™€ κ°™κ±°λ‚ λ§μ•„μ§€λ©΄ μΉλ¦¬
   - 4λ…μΌ λ•: 1λ…, 5λ… μ΄μƒ: 2λ…

2. **μ¤νμ΄ (SPY)** (λ§ν”Όμ•„ ν€)

   - λ°¤μ— ν• λ…μ μ§μ—…μ„ μ•μ•„λ‚Ό μ μμµλ‹λ‹¤
   - λ§ν”Όμ•„λ¥Ό μ΅°μ‚¬ν•λ©΄ μ ‘μ„ ν•μ—¬ λ§ν”Όμ•„ ν€μ΄ λ©λ‹λ‹¤

3. **λ§λ‹΄ (MADAME)** (λ§ν”Όμ•„ ν€)

   - λ‚® ν¬ν‘λ΅ ν”λ μ΄μ–΄λ¥Ό μ νΉν•μ—¬ λ°¤μ— λ¥λ ¥ μ‚¬μ©μ„ λ§‰μµλ‹λ‹¤
   - λ§ν”Όμ•„λ¥Ό μ νΉν•λ©΄ μ ‘μ„ ν•μ—¬ λ§ν”Όμ•„ ν€μ΄ λ©λ‹λ‹¤

4. **μμ‚¬ (DOCTOR)**

   - λ°¤μ— ν• λ…μ„ μ§€μ •ν•μ—¬ λ³΄νΈν•  μ μμµλ‹λ‹¤
   - λ§ν”Όμ•„μ κ³µκ²©μΌλ΅λ¶€ν„° λ³΄νΈ κ°€λ¥

5. **κ²½μ°° (POLICE)**

   - λ°¤μ— ν• λ…μ„ μ΅°μ‚¬ν•μ—¬ λ§ν”Όμ•„ μ—¬λ¶€ ν™•μΈ κ°€λ¥
   - μ΅°μ‚¬ κ²°κ³Όλ” λ³ΈμΈλ§ ν™•μΈ κ°€λ¥

6. **μ •μΉμΈ (POLITICIAN)**

   - ν¬ν‘λ΅ μ£½μ§€ μ•μΌλ©° 2ν‘λ¥Ό ν–‰μ‚¬ν•©λ‹λ‹¤

7. **κµ°μΈ (SOLDIER)**

   - λ§ν”Όμ•„μ κ³µκ²©μ„ ν• μ°¨λ΅€ λ²„ν‹Έ μ μμµλ‹λ‹¤

8. **μλ§¤ (SHAMAN)**

   - μ£½μ€ μλ“¤μ λ€ν™”λ¥Ό λ³΄κ³  ν• λ…μ„ μ„±λ¶μ‹μΌ μ§μ—…μ„ μ•μ•„λ‚Ό μ μμµλ‹λ‹¤

9. **κΈ°μ (REPORTER)**

   - 2μΌμ°¨~8μΌμ°¨ λ°¤μ— ν• λ…μ„ μ„ νƒν•μ—¬ λ‹¤μ λ‚  μ§μ—…μ„ κ³µκ°ν•©λ‹λ‹¤

10. **λ„κµ΄κΎΌ (GHOUL)**

    - μ²«λ‚  λ°¤ λ§ν”Όμ•„μ—κ² μ‚΄ν•΄λ‹Ήν• μ‚¬λμ μ§μ—…μ„ μ–»μµλ‹λ‹¤

11. **κ±΄λ‹¬ (GANGSTER)**

    - λ°¤λ§λ‹¤ ν• λ…μ„ μ„ νƒν•μ—¬ λ‹¤μ λ‚  ν¬ν‘λ¥Ό λ»ν•κ² λ§λ“­λ‹λ‹¤

12. **μ„±μ§μ (PRIEST)**

    - κ²μ„ μ¤‘ λ‹¨ ν• λ², μ£½μ€ ν”λ μ΄μ–΄λ¥Ό λ¶€ν™μ‹ν‚¬ μ μμµλ‹λ‹¤

13. **μ‹λ―Ό (CITIZEN)**
    - νΉλ³„ν• λ¥λ ¥μ€ μ—†μ§€λ§ ν¬ν‘λ΅ λ§ν”Όμ•„λ¥Ό μ°Ύμ•„μ•Ό ν•©λ‹λ‹¤

### κ²μ„ μ§„ν–‰

#### 1λ‹¨κ³„: λ€κΈ° (WAITING)

- μµμ† 4λ… μ΄μƒμ ν”λ μ΄μ–΄κ°€ μ ‘μ†ν•΄μ•Ό ν•¨
- μ„λ²„ κ΄€λ¦¬μκ°€ "Start Game" λ²„νΌμ„ λλ¬ κ²μ„ μ‹μ‘
- μ—­ν• μ΄ λ¬΄μ‘μ„λ΅ λ°°μ •λ¨

#### 2λ‹¨κ³„: λ°¤ (NIGHT) - 30μ΄

- λ§ν”Όμ•„: μ κ±°ν•  λ€μƒ μ„ νƒ
- μμ‚¬: λ³΄νΈν•  λ€μƒ μ„ νƒ
- κ²½μ°°: μ΅°μ‚¬ν•  λ€μƒ μ„ νƒ
- κΈ°νƒ€ νΉμ μ§μ—…: κ°μμ λ¥λ ¥ μ‚¬μ©
- μ‹λ―Ό: μ•„λ¬΄ ν–‰λ™λ„ ν•  μ μ—†μ

#### 3λ‹¨κ³„: λ°¤ κ²°κ³Ό λ°ν‘

- λ§ν”Όμ•„μ—κ² μ κ±°λ μ‚¬λ κ³µκ°
- μμ‚¬κ°€ λ³΄νΈν• κ²½μ° μƒμ΅΄
- κµ°μΈμ λ°©μ–΄λ§‰μΌλ΅ μƒμ΅΄ κ°€λ¥
- κ²½μ°°κ³Ό μ¤νμ΄λ” μ΅°μ‚¬ κ²°κ³Όλ¥Ό κ°μΈμ μΌλ΅ ν™•μΈ

#### 4λ‹¨κ³„: λ‚® (DAY) - 30μ΄

- λ¨λ“  ν”λ μ΄μ–΄κ°€ μμ λ΅­κ² λ€ν™”
- μμ‹¬λλ” μ‚¬λμ— λ€ν•΄ ν† λ΅ 
- κΈ°μμ νΉμΆ… λ°ν‘ (ν•΄λ‹Ήν•λ” κ²½μ°)
- μ„±μ§μμ λ¶€ν™ (ν•΄λ‹Ήν•λ” κ²½μ°)

#### 5λ‹¨κ³„: ν¬ν‘ (VOTE) - 20μ΄

- μ‚΄μ•„μλ” ν”λ μ΄μ–΄ μ¤‘ ν• λ…μ—κ² ν¬ν‘
- κ°€μ¥ λ§μ€ ν‘λ¥Ό λ°›μ€ μ‚¬λμ΄ μ κ±°λ¨
- λ™μ μ΄κ±°λ‚ ν¬ν‘κ°€ μ—†μΌλ©΄ μ•„λ¬΄λ„ μ κ±°λμ§€ μ•μ
- μ •μΉμΈμ€ 2ν‘λ¥Ό ν–‰μ‚¬ν•λ©° ν¬ν‘λ΅ μ£½μ§€ μ•μ

#### 6λ‹¨κ³„: μΉλ¦¬ μ΅°κ±΄ ν™•μΈ

- **μ‹λ―Ό ν€ μΉλ¦¬**: λ¨λ“  λ§ν”Όμ•„ ν€μ΄ μ κ±°λ¨
- **λ§ν”Όμ•„ ν€ μΉλ¦¬**: λ§ν”Όμ•„ ν€ μ β‰¥ μ‹λ―Ό ν€ νμ›

μΉλ¦¬ μ΅°κ±΄μ΄ λ§μ΅±λμ§€ μ•μΌλ©΄ 2λ‹¨κ³„(λ°¤)λ΅ λμ•„κ°€μ„ λ°λ³µ

## π― ν”λ μ΄ ν

### μ‹λ―Ό ν€ μ „λµ

1. **κ²½μ°° μ •λ³΄ ν™μ©**: κ²½μ°°μ μ΅°μ‚¬ κ²°κ³Όλ¥Ό μ‹ μ¤‘ν λ“£κ³  νλ‹¨
2. **ν¬ν‘ ν¨ν„΄ λ¶„μ„**: λ„κ°€ λ„κµ¬μ—κ² ν¬ν‘ν•λ”μ§€ κ΄€μ°°
3. **ν–‰λ™ ν¨ν„΄ κ΄€μ°°**: μμ‹¬μ¤λ¬μ΄ λ°μ–Έμ΄λ‚ ν–‰λ™ μ²΄ν¬
4. **μ •λ³΄ κ³µμ **: μμ‹ μ΄ λ³Έ κ²ƒ, λλ‚€ κ²ƒμ„ κ³µμ 

### λ§ν”Όμ•„ μ „λµ

1. **μ‹λ―Όμ²λΌ ν–‰λ™**: λ„λ¬΄ μ΅°μ©ν•κ±°λ‚ μ κ·Ήμ μ΄μ§€ μ•κ²
2. **λ¥λ ¥μ μ κ±° μ°μ„ **: μμ‚¬/κ²½μ°°μ„ λ¨Όμ € μ κ±°
3. **ν”„λ μ„ μ§κΈ°**: λ‹¤λ¥Έ ν”λ μ΄μ–΄λ¥Ό μμ‹¬ν•λ„λ΅ μ λ„
4. **ν€ν”λ μ΄**: λ™λ£ λ§ν”Όμ•„μ™€ ν¬ν‘λ¥Ό λ¶„μ‚°

## π”§ κ°λ° κ°€μ΄λ“

### λΉλ“ μ‹μ¤ν…

μ΄ ν”„λ΅μ νΈλ” **Maven**μ„ μ‚¬μ©ν•μ—¬ λΉλ“λ©λ‹λ‹¤.

```bash
# μ»΄νμΌλ§
mvn compile

# ν…μ¤νΈ λ° ν¨ν‚¤μ§•
mvn clean package

# ν…μ¤νΈ κ±΄λ„λ›°κ³  λΉλ“
mvn clean package -DskipTests
```

### CI/CD

GitHub Actionsλ¥Ό ν†µν•΄ μλ™ λΉλ“ λ° λ¦΄λ¦¬μ¤κ°€ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.

- **μλ™ λΉλ“**: λ¨λ“  pushμ™€ PRμ— λ€ν•΄ μλ™ λΉλ“
- **μλ™ λ¦΄λ¦¬μ¤**: `v*` νƒκ·Έλ¥Ό ν‘Έμ‹ν•λ©΄ GitHub Releasesμ— μλ™ μ—…λ΅λ“

#### λ¦΄λ¦¬μ¤ λ°©λ²•

```bash
# νƒκ·Έ μƒμ„±
git tag -a v1.0.0 -m "Release version 1.0.0"

# νƒκ·Έ ν‘Έμ‹
git push origin v1.0.0
```

GitHub Actionsκ°€ μλ™μΌλ΅:

1. ν”„λ΅μ νΈ λΉλ“
2. JAR νμΌ μƒμ„±
3. GitHub Releasesμ— μ—…λ΅λ“

## π“΅ ν”„λ΅ν† μ½ μ„¤λ…

### μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ

- `ROLE:μ—­ν• λ…` - μ—­ν•  λ°°μ •
- `PHASE:λ‹¨κ³„λ…` - κ²μ„ λ‹¨κ³„ λ³€κ²½
- `PLAYERS:μ΄λ¦„1,μ΄λ¦„2,...` - ν”λ μ΄μ–΄ λ©λ΅ (μ£½μ€ ν”λ μ΄μ–΄λ” [DEAD] μ ‘λ‘μ‚¬)
- `DEAD:true/false` - μ‚¬λ§/λ¶€ν™ μ•λ¦Ό
- `SYSTEM: λ©”μ‹μ§€` - μ‹μ¤ν… λ©”μ‹μ§€

### ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„

- `/login μ΄λ¦„` - λ΅κ·ΈμΈ
- `NIGHT_ACTION:μ—­ν• :λ€μƒ` - λ°¤ ν–‰λ™
- `VOTE:λ€μƒ` - ν¬ν‘
- `[μ΄λ¦„] λ©”μ‹μ§€` - μΌλ° μ±„ν…
- `/exit` - μΆ…λ£

## π› οΈ κΈ°μ  μ¤νƒ

- **μ–Έμ–΄**: Java 17
- **λΉλ“ λ„κµ¬**: Maven 3.x
- **GUI**: Java Swing
- **λ„¤νΈμ›ν¬**: Java Socket Programming
- **CI/CD**: GitHub Actions
- **μ‚¬μ΄λ“**: Java Sound API
- **μ΄λ―Έμ§€**: Java ImageIO

## π“ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” κµμ΅ λ©μ μΌλ΅ μ‘μ„±λμ—μµλ‹λ‹¤.

## π¤ κΈ°μ—¬

μ΄μμ™€ PRμ€ μ–Έμ λ‚ ν™μν•©λ‹λ‹¤!

## π“§ λ¬Έμ

ν”„λ΅μ νΈμ— λ€ν• λ¬Έμμ‚¬ν•­μ€ Issuesλ¥Ό ν†µν•΄ λ‚¨κ²¨μ£Όμ„Έμ”.
